---

## 🧩 Основные сущности

### 👤 User

- Представляет пользователя системы.
- Может иметь роль: `User`, `Manager`, `Admin` (создание с ролью `Admin` запрещено).
- Может быть участником команды.
- Генерирует события:
  - `CreateUserEvent`
  - `UserLeftTeamEvent`
  - `AddMembersOfTeamsEvent`

Методы:
- `Create(...)`
- `AddTeam(teamId, password)`
- `LeaveTeam()`

---

### 👥 Team

- Представляет команду пользователей.
- Создается только менеджером.
- Поддерживает добавление и удаление участников по паролю.
- Хранит ID администратора (создателя).
- Генерирует исключения при нарушении бизнес-правил.

Методы:
- `Create(name, password, admin)`
- `AddMember(user, password)`
- `RemoveMember(user)`
- `IsMember(userId)`

---

### 👨‍💼 Manager

- Обертка над `User` с ролью `Manager`.
- Управляет удалением участников из команды.
- Генерирует событие `ManagerCreatedEvent`.

---

### ✅ Tasks (Задачи)

- Создаются пользователями.
- Поддерживают участников и комментарии.
- Хранят статус, описание, дату создания.

Методы:
- `Create(title, description, creator)`

---

## 🧪 Тесты

Расположены в `Domain.Tests`.

### Примеры покрытых сценариев:

#### ✅ TeamTest

- Успешное создание команды
- Ошибка при создании с невалидными данными
- Ошибка при создании не менеджером
- Добавление участника с правильным паролем
- Ошибка при неправильном пароле
- Удаление участника
- Ошибка при попытке удалить администратора

#### ✅ UserTest

- Успешное создание пользователя
- Ошибка при создании администратора
- Добавление команды пользователю
- Выход пользователя из команды
- Ошибка при выходе, если пользователь не в команде

---

## ⚠️ Бизнес-ограничения

- Только пользователь с ролью `Manager` может создать команду.
- Менеджер не может вступить в другие команды.
- Удаление администратора из команды запрещено.
- Пароль команды обязателен при добавлении участника.
- Пользователь может состоять только в одной команде.

---

## 📌 Исключения

Используются кастомные бизнес-исключения:

- `NoPermissionException`
- `UserAlreadyExists`
- `IncorrectPasswordException`

---

## 🧠 TODO / Идеи для развития

- [ ] Хеширование пароля команды
- [ ] Передача прав администратора другому участнику
- [ ] Поддержка нескольких ролей у пользователя
- [ ] Интеграция с инфраструктурой (репозитории, БД)
- [ ] Обработка событий через MediatR
- [ ] Добавить `TaskService` для управления задачами

---

## 🛠️ Технологии

- C# 10 / .NET 6+
- DDD (Domain-Driven Design)
- FluentAssertions
- xUnit

---

## ✍️ Автор

Разработано как учебный проект с применением лучших практик проектирования.

---